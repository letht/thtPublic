"use strict";ys.perfo={on:-1!==window.location.hash.indexOf("pjperfo")},ys.perfo.cl=function(e){this.init(e)},ys.perfo.cl.prototype={ysScans:0,getLoadTime:function(){return ys.perfo.navigationTiming?ys.perfo.navigationTiming.loadEventStart-ys.perfo.navigationTiming.startTime:ys.perfo.timing.loadEventStart-ys.perfo.timing.navigationStart},getDomComplete:function(){return ys.perfo.navigationTiming?ys.perfo.navigationTiming.domComplete-ys.perfo.navigationTiming.responseEnd:ys.perfo.timing.domComplete-ys.perfo.timing.domLoading},getDomInteractive:function(){return ys.perfo.navigationTiming?ys.perfo.navigationTiming.domInteractive-ys.perfo.navigationTiming.responseEnd:ys.perfo.timing.domInteractive-ys.perfo.timing.domLoading},getFirstPaint:function(){var e=0;return window.PerformancePaintTiming?performance.getEntriesByType("paint").filter((function(e){return"first-contentful-paint"===e.name}))[0].startTime:window.chrome&&window.chrome.loadTimes?(e=1e3*window.chrome.loadTimes().firstPaintTime,(e-=1e3*window.chrome.loadTimes().startLoadTime).toFixed(0)):ys.perfo.timing&&"number"==typeof ys.perfo.timing.msFirstPaint?(e=ys.perfo.timing.msFirstPaint,(e-=ys.perfo.timing.navigationStart).toFixed(0)):ys.perfo.timing&&"number"==typeof ys.perfo.timing.mozFirstPaint?(e=ys.perfo.timing.mozFirstPaint,(e-=ys.perfo.timing.navigationStart).toFixed(0)):"Non supporté"},getNumRequests:function(){if(performance.getEntries){var e=0;return $.each(window.performance.getEntries(),(function(){"resource"==this.entryType&&e++})),e}return"Non supporté"},getTTFB:function(){return ys.perfo.navigationTiming?ys.perfo.navigationTiming.responseStart-ys.perfo.navigationTiming.connectEnd:ys.perfo.timing.responseStart-ys.perfo.timing.connectEnd},getYsScans:function(){return this.ysScans},countYsScans:function(){this.ysScans++},getYsHead:function(){try{window.performance.measure("ysInit","ys.head.init.start","ys.head.init.end")}catch(e){ys.head.error(e)}var e=window.performance.getEntriesByName("ysInit")[0];return e?e.duration.toFixed(0):0},getYsScanTime:function(){try{window.performance.measure("ysScanTime","ys.head.before.scan","ys.head.after.scan")}catch(e){ys.head.error(e)}var e=window.performance.getEntriesByName("ysScanTime")[0];return e?e.duration.toFixed(0):0},getYsScansByComposants:function(){var e=[];return $.each(window.performance.getEntriesByType("measure"),(function(){if(0===this.name.indexOf("ys.composant:")){var o=this.name.indexOf("@");e.push({duree:this.duration,html:['<div class="metric composant" title="Durée du Scan de ce composant">','<span class="name">'+this.name.slice(13,o||null)+"</span> ",'<span class="value">'+this.duration.toFixed(2)+" ms</span>",o&&this.name.slice(o+1)>0?'<span class="value red">Trouvé '+this.name.slice(o+1)+" fois</span>":"","</div>"].join("")})}})),e.sort((function(e,o){return e.duree<o.duree?1:e.duree>o.duree?-1:0})).map((function(e){return e.html})).join("")},getDomSize:function(){return $("*").length},init:function(e){this._={options:$.extend(!0,{prefix:"global perfos",lib0:"depuis le début ys.head.min.js",d0:ys.head.d[0]},e),log:[]},this.top(this._.options.lib0,this._.options.d0)},top:function(e,o){var i=ys.head.now(),n=this._.log.length,t=o||(n?this._.log[0].d:i),a=o?i-o:n?i-this._.log[n-1].d:0;this._.log.push({l:e,"t+":a+"ms","t0+":i-t+"ms",d:i})},console:function(e,o){this.top(e),ys.head.console(JSON.stringify({prefix:this._.options.prefix,log:this._.log},null,"\t")),o||(this._.log=[])},toolbar:function(e,o){var i=this,n=[];$.each({TTFB:{id:"TTFB",unitLabel:"ms",collector:"getTTFB",help:"Time To First Byte | temps de génération de la page"},firstPaint:{id:"First Paint",unitLabel:"ms",collector:"getFirstPaint",help:"Premier affichage"},pageLoad:{id:"Page Load",unitLabel:"ms",collector:"getLoadTime",help:"Temps total du chargement | TTFB + Dom Complete"},domInteractive:{id:"DOM Interactive",unitLabel:"ms",collector:"getDomInteractive",help:"Temps à partir du quel le document est interactif"},domComplete:{id:"DOM Complete",unitLabel:"ms",collector:"getDomComplete",help:"Temps de chargement du DOM"},requests:{id:"Requetes",unitLabel:"",collector:"getNumRequests",help:"Nombre de ressources téléchargées"},domSize:{id:"DOM Size",unitLabel:"",collector:"getDomSize",help:"Nombre d'Objets dans le DOM"},scansYS:{klass:"composcont",id:"YS Composants",unitLabel:"scans",collector:"getYsScans",help:"Nombre de composants YellowScript demandant un scan au chargement"},scansYScomposants:{klass:"compos",id:"YS Composants timers",unitLabel:"",collector:"getYsScansByComposants",help:"Voir le détail de chaque composant"},scanTimeYS:{id:"YS Scan",unitLabel:"ms",collector:"getYsScanTime",help:"Durée du Scan | dépend du nombre de composants et du nombre de fois ou ils sont trouvés dans la page"},loadHeadYS:{id:"YS Load",unitLabel:"ms",collector:"getYsHead",help:"Temps d'initialisation complet du Framework (scan compris)"}},(function(){n.push(['<div class="metric'+(this.klass?" "+this.klass:"")+'" title="'+this.help+'">','<span class="name">'+this.id+"</span> ",'<span class="value">'+i[this.collector]()+" "+this.unitLabel+"</span>","</div>"].join(""))})),$("<style>").text(".pjperfo-toolbar {text-align:center;position:fixed;bottom:0;left:0;right:0;height:auto;overflow:scroll;background:#303030;color:#ebebeb;box-sizing:border-box;font-size:12px;z-index:100000;font-family: DejaVu Sans Mono;}.pjperfo-toolbar.open {height:100%;}.pjperfo-toolbar, .pjperfo-toolbar * {box-sizing:border-box;}.pjperfo-toolbar .metric {height:40px;display:inline-block;margin:0 10px;padding-top:5px;vertical-align:middle;}.pjperfo-toolbar .metric:hover {cursor:help;}.pjperfo-toolbar .metric span {display:block;vertical-align:middle;}.pjperfo-toolbar .metric .name {color:#d87515;}.pjperfo-toolbar .red {color:#ff3300;}.pjperfo-toolbar .composant {height:50px;}.pjperfo-toolbar .compos {display:none;}.pjperfo-toolbar .compos > .name {display:none;}.pjperfo-toolbar.open .composcont + .compos {display:inline-block;height:auto;}@media screen and (min-width: 768px) {.pjperfo-toolbar {height:40px;overflow:visible;}.pjperfo-toolbar.open {height:40px;}.pjperfo-toolbar .compos {margin:0;}.pjperfo-toolbar.open .compos > .value {display:block;border-bottom:1px solid #fff;background:#303030;position:absolute;bottom:40px;left:0;right:0;}}").appendTo($("head")),$("<div>").addClass("pjperfo-toolbar").attr("id","pjperfo-toolbar").html(n.join("")).click((function(){$(this).toggleClass("open")})).appendTo($("body"))}},ys.perfo.glob=new ys.perfo.cl,"performance"in window&&window.performance.mark&&(ys.head.addAction("ys.head.init.start",(function(){ys.perfo.glob.top("DocumentReady: ys.head.init.start"),window.performance.mark("ys.head.init.start")})),ys.head.addAction("ys.head.init.end",(function(){window.performance.mark("ys.head.init.end")})),ys.head.addActionOnce("ys.head.before.scan.doc",(function(){window.performance.mark("ys.head.before.scan")})),ys.head.addActionOnce("ys.head.after.scan.doc",(function(){window.performance.mark("ys.head.after.scan")}))),"performance"in window&&("timing"in window.performance||"PerformanceNavigationTiming"in window)&&(ys.perfo.timing=null,ys.perfo.navigationTiming=null,window.PerformanceNavigationTiming&&(ys.perfo.navigationTiming=window.performance.getEntriesByType("navigation")[0]),ys.perfo.navigationTiming&&!window.PerformancePaintTiming||(ys.perfo.timing=window.performance.timing),window.onload=function(){ys.perfo.on&&ys.perfo.glob.toolbar()});"use strict";!function(t){ys.head.$doc.on("mousedown","a[data-pjlb]",(function(){var a=$(this),e=a.data(t);ys.head.doAction("before."+t,a,e),a.attr($.extend({href:ys.head.dataUrl(e)},e.target?{target:e.target}:{})).removeAttr("data-"+t),ys.head.doAction("after."+t,a,e)})).on("mousedown","span[data-pjlb]",(function(a){var e=$(this),d=e.data(t),o=d.target?{target:d.target}:{};1==a.which?document.location=ys.head.dataUrl(d):function(a,e,d,o){a.removeAttr("data-"+t),$.each(e.attributes,(function(){if(this.specified){var t=this.nodeName.toLowerCase();(this.nodeValue||t.indexOf("data-")>=0)&&(d[this.nodeName]=this.nodeValue)}})),d.href=ys.head.dataUrl(o);var n=$("<a/>").attr(d).append(a.html());a.replaceWith(n)}(e,this,o,d)})).on("debrouille."+t,"[data-pjlb]",(function(){$(this).trigger("mousedown")}))}("pjlb");"use strict";!function(t,a){function o(t,a,o){return $.extend(o||{on:"click",sel:t,klass:""},a||{})}function e(a){var e=$(this),l=e.data(t);$.isArray(l)||(l=[l]),$.each(l,(function(t,l){var c=o(e,l);s(a,c),a&&"click"==c.on&&"click"==a.type&&e.is("a")&&a.preventDefault(),n(c,c.force)}))}function s(a,o){o.outsideToggle&&ys.head.$doc.off("click.outer"+t).one("click.outer"+t,(function(t){t.target!==a.target&&n(o,!!o.outerForce)}))}function n(a,o){var e=$(a.sel).toggleClass(a.klass,null==o?o:!!o);if(setTimeout((function(){e.trigger($.extend({type:t},a))}),50),a.scrollTo&&$(a.scrollTo.to).length){var s=$(a.scrollTo.to).offset().top;a.scrollTo.delta&&(s=parseFloat(s)+parseFloat(a.scrollTo.delta)),e.hasClass(a.klass)&&ys.head.scrollTo(s,{axis:"y",what:a.scrollTo.what})}}ys.head.addAction("do_"+t,(function(t,a,o){n(t,a),t.hasOwnProperty("outerForce")||(t.outerForce=!!t.reverseClass),s(o,t)})),ys.head.$doc.on("click."+t,"[data-"+t+"]:not(select)",(function(){var a=$(this).data(t)||{};"click"!==a.on&&void 0!==a.on||e.apply(this,arguments)})),ys.head.$doc.on("change."+t,"select[data-"+t+"]",(function(){var a=$(this),e=a.data(t);$.isArray(e)||(e=[e]),$.each(e,(function(e,s){var l=o(a,s),c={},i=t+"_option";for(var r in $("option[data-"+i+"], optgroup[data-"+i+"]",a).each((function(){var t=$(this),a=t.is("option:selected")||0<t.find("option:selected").length,o=t.data(i);o&&(c[o]=c[o]&&c[o]||a)})),c)n($.extend({},l,{klass:r}),c[r])}))})),ys.head.onScan("[data-"+t+"]",(function(){var a=this,s=$(this),n=s.data(t);if(n.var)return n.sel||(n.sel=this),void(window[n.var]&&$(n.sel).toggleClass(n.var+"-"+window[n.var]));$.isArray(n)||(n=[n]),$.each(n,(function(n,l){var c=o(s,l);s.is("select")?s.trigger("change."+t):("hover"==c.on&&s.hover((function(){e.call(a)})),"16i"==c.on&&s.pjCtrl16i((function(){e.call(a)})),c.onload&&e.call(a))}))})),ys.head.onScan("[data-pjdelaytoggleclass]",(function(){var t=$(this),a=t.data("pjdelaytoggleclass");a.sel||(a.sel=this),t&&a.klass&&a.delay&&!isNaN(parseInt(a.delay))&&setTimeout((function(){n(a,a.force)}),a.delay)}))}("pjtoggleclass");